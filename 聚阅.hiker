海阔视界规则分享，当前分享的是：小程序￥home_rule_v2￥base64://@聚阅@eyJsYXN0X2NoYXB0ZXJfcnVsZSI6IiIsInRpdGxlIjoi6IGa6ZiFIiwiYXV0aG9yIjoiIiwidXJsIjoiaGlrZXI6Ly9lbXB0eSMjZnlwYWdlIiwidmVyc2lvbiI6OCwiY29sX3R5cGUiOiJtb3ZpZV8zIiwiY2xhc3NfbmFtZSI6IiIsInR5cGUiOiJhbGwiLCJjbGFzc191cmwiOiIiLCJhcmVhX25hbWUiOiIiLCJhcmVhX3VybCI6IiIsInNvcnRfbmFtZSI6IiIsInllYXJfbmFtZSI6IiIsInNvcnRfdXJsIjoiIiwieWVhcl91cmwiOiIiLCJmaW5kX3J1bGUiOiJqczpcbmlmKGNvbmZpZy7ogZrpmIUpe1xuICAgIHJlcXVpcmUoY29uZmlnLuiBmumYhSk7XG4gICAgeWlqaSgpO1xufWVsc2V7XG4gICAgJC5yZXF1aXJlKCdnaHByb3h5JykucHJveHlQYWdlKCk7XG59Iiwic2VhcmNoX3VybCI6Imhpa2VyOi8vZW1wdHkjIyoqIyNmeXBhZ2UiLCJncm91cCI6IuKRoOaOqOiNkCIsInNlYXJjaEZpbmQiOiJqczpcbnJlcXVpcmUoY29uZmlnLuiBmumYhSk7XG5zb3VzdW8oKSIsImRldGFpbF9jb2xfdHlwZSI6Im1vdmllXzMiLCJkZXRhaWxfZmluZF9ydWxlIjoiIiwic2RldGFpbF9jb2xfdHlwZSI6Im1vdmllXzEiLCJzZGV0YWlsX2ZpbmRfcnVsZSI6IioiLCJ1YSI6InBjIiwicHJlUnVsZSI6Ii8qPCQ+XG5AaW5jbHVkZSBzdGFydFxuaW1wb3J0R01cbkBpbmNsdWRlIGVuZFxuPCQ+Ki9cblxuaWYgKCFjb25maWcu6IGa6ZiFKSB7XG4gICAgbGV0IHNyY0hvbWUgPSAkLnJlcXVpcmUoJ2docHJveHknKS5nZXRTcmNIb21lKCk7XG4gICAgaWYgKHNyY0hvbWUpIHtcbiAgICAgICAgaW5pdENvbmZpZyh7XG4gICAgICAgICAgICDogZrpmIU6IHNyY0hvbWVcbiAgICAgICAgfSk7XG4gICAgICAgIHNldFB1YmxpY0l0ZW0oJ+iBmumYhScsIHNyY0hvbWUpO1xuICAgIH1cbn1cbi8vYnku5biF4oiaYOS6uuaJjSIsInBhZ2VzIjoiW3tcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLphY3nva7lj4LmlbBcIixcInBhdGhcIjpcImNvbmZpZ1wiLFwicnVsZVwiOlwianM6XFxubGV0IGhvbWUgPSAkLnJlcXVpcmUoJ2docHJveHknKS5nZXRTcmNIb21lKCk7XFxuJC5leHBvcnRzID0ge1xcbiAgICB2ZXJzaW9uOiA4LFxcbiAgICDkvp3otZY6IGhvbWVcXG59XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLkupHlj6Pku6Tlr7zlhaVcIixcInBhdGhcIjpcImltcG9ydFwiLFwicnVsZVwiOlwianM6XFxyXFxuZnVuY3Rpb24gY2xvdWRpbXBvcnQoKSB7XFxyXFxuICAgIGlmIChpbnB1dC5pbmNsdWRlcygn5LiJ6ZKI56eR5YW055+t5YmnJykpIHtcXHJcXG4gICAgICAgIGNvcHkoaW5wdXQpO1xcclxcbiAgICAgICAgcmV0dXJuICdoaWtlcjovL3BhZ2UvZHVhbmp1I2dhbWVUaGVtZSMjbm9SZWNvcmRIaXN0b3J5IyNub0hpc3RvcnkjP3J1bGU96IGa6ZiFJztcXHJcXG4gICAgfWVsc2UgaWYgKGlucHV0LmluY2x1ZGVzKCfogZrpmIXop6PmnpAnKXx8aW5wdXQuaW5jbHVkZXMoJ+iBmumYheiwg+eUqCcpKSB7XFxyXFxuICAgICAgICB3cml0ZUZpbGUoXFxcImhpa2VyOi8vZmlsZXMvX2NhY2hlL0p1amlleGkvY2xvdWRpbXBvcnQudHh0XFxcIiwgaW5wdXQpO1xcclxcbiAgICB9ZWxzZXtcXHJcXG4gICAgICAgIHdyaXRlRmlsZShcXFwiaGlrZXI6Ly9maWxlcy9fY2FjaGUvSnV5dWUvY2xvdWRpbXBvcnQudHh0XFxcIiwgaW5wdXQpO1xcclxcbiAgICB9XFxyXFxuICAgIFxcclxcbiAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9pbXBvcnRDb25maXJtI2ltbWVyc2l2ZVRoZW1lIyNub1JlY29yZEhpc3RvcnkjI25vSGlzdG9yeSM/cnVsZT3ogZrpmIVcXFwiXFxyXFxufVxcclxcbiQuZXhwb3J0cyA9IGNsb3VkaW1wb3J0KCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLku6PnkIbnrqHnkIZcIixcInBhdGhcIjpcImdocHJveHlcIixcInJ1bGVcIjpcImpzOlxcbmxldCBjZmdmaWxlID0gXFxcImhpa2VyOi8vZmlsZXMvcnVsZXMvU3JjL0p1eXVlL2NvbmZpZy5qc29uXFxcIjtcXG5sZXQgSnVjb25maWcgPSB7fTtcXG5sZXQgSnVjZmcgPSBmZXRjaChjZmdmaWxlKTtcXG5pZiAoSnVjZmcgIT0gXFxcIlxcXCIpIHtcXG4gICAgZXZhbChcXFwiSnVjb25maWc9XFxcIiArIEp1Y2ZnICsgXFxcIjtcXFwiKTtcXG59XFxubGV0IHByb3h5bGlzdCA9IEp1Y29uZmlnWydnaHByb3h5J10gfHwgW107XFxuXFxuZnVuY3Rpb24gZ2V0cHJveHkoKSB7XFxuICAgIGxldCBsaXN0ID0gcHJveHlsaXN0LmZpbHRlcih2ID0+ICF2LnN0b3ApLm1hcChpdCA9PiBpdC51cmwpO1xcbiAgICBpZiAobGlzdC5sZW5ndGggPT0gMCkge1xcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBsZXQgZ2h1cmxzID0gJ2h0dHBzOi8vd3d3LmdpdGh1Yi1taXJyb3JzLnpvbmUuaWQvYXBpL3VybHMnO1xcbiAgICAgICAgICAgIGxpc3QgPSBKU09OLnBhcnNlKGZldGNoKGdodXJscykpLmRhdGEubWFwKHVybCA9PiB7XFxuICAgICAgICAgICAgICAgIHVybCA9IHVybC50cmltKCk7XFxuICAgICAgICAgICAgICAgIGlmICghdXJsLmVuZHNXaXRoKFxcXCIvXFxcIikpIHtcXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IHVybCArIFxcXCIvXFxcIjtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsO1xcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgIHNldHByb3h5KGxpc3QpO1xcbiAgICAgICAgfSBjYXRjaCAoZSkge31cXG4gICAgfVxcbiAgICByZXR1cm4gbGlzdDtcXG59XFxuXFxuZnVuY3Rpb24gZ2V0UHJveHlVcmwoKSB7XFxuICAgIGxldCBwcm94eSA9IGdldE15VmFyKCdTcmNKdV9wcm94eVVybCcsICcnKTtcXG4gICAgaWYgKHByb3h5ID09ICcnKSB7XFxuICAgICAgICBsZXQgZ2hsaXN0ID0gZ2V0cHJveHkoKTtcXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgZ2hsaXN0KSB7XFxuICAgICAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKGZldGNoKGl0ZW0sIHtcXG4gICAgICAgICAgICAgICAgd2l0aFN0YXR1c0NvZGU6IHRydWUsXFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXFxuICAgICAgICAgICAgfSkpO1xcbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XFxuICAgICAgICAgICAgICAgIHB1dE15VmFyKCdTcmNKdV9wcm94eVVybCcsIGl0ZW0pO1xcbiAgICAgICAgICAgICAgICBwcm94eSA9IGl0ZW07XFxuICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIHNldHByb3h5KGl0ZW0sIDApO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgfVxcbiAgICByZXR1cm4gcHJveHk7XFxufVxcblxcbmZ1bmN0aW9uIGdldFNyY0hvbWUoKSB7XFxuICAgIGxldCBzcmNIb21lID0gZ2V0SXRlbSgn5L6d6LWWJywgJycpO1xcbiAgICBpZihzcmNIb21lKXtcXG4gICAgICAgIGlmKHNyY0hvbWUuc3RhcnRzV2l0aCgnaHR0cHM6Ly9yYXcuZ2l0aHViJykpe1xcbiAgICAgICAgICAgIGxldCBwcm94eVVybCA9IGdldFByb3h5VXJsKCk7XFxuICAgICAgICAgICAgc3JjSG9tZSA9IHByb3h5VXJsICsgc3JjSG9tZTtcXG4gICAgICAgIH1cXG4gICAgICAgIHRyeXtcXG4gICAgICAgICAgICBsZXQgdmVyaWZ5ID0gZmMoc3JjSG9tZS5yZXBsYWNlKC9bXi9dKiQvLCcnKSArICdTcmNWZXJpZnknLCAxNjgpO1xcbiAgICAgICAgICAgIGlmKHZlcmlmeT09J29rJyl7XFxuICAgICAgICAgICAgICAgIHJldHVybiBzcmNIb21lO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1jYXRjaChlKXt9XFxuICAgIH1cXG4gICAgdHJ5IHtcXG4gICAgICAgIGxldCBwcm94eVVybCA9IGdldFByb3h5VXJsKCk7XFxuICAgICAgICByZXF1aXJlKHByb3h5VXJsICsgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zcmM0ODU5Nzk2Mi9oay9tYXN0ZXIvSnVSZXF1aXJlLmpzJywge1xcbiAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDBcXG4gICAgICAgIH0pO1xcbiAgICAgICAgbGV0IHJlbHlmaWxlID0gZ2V0UmVseSgpO1xcbiAgICAgICAgaWYgKHJlbHlmaWxlKSB7XFxuICAgICAgICAgICAgc3JjSG9tZSA9IHJlbHlmaWxlLmluY2x1ZGVzKCdyYXcuZ2l0aHViJykgPyBwcm94eVVybCArIHJlbHlmaWxlIDogcmVseWZpbGU7XFxuICAgICAgICAgICAgc2V0SXRlbSgn5L6d6LWWJywgc3JjSG9tZSk7XFxuICAgICAgICAgICAgbG9nKCfojrflj5bku6PnoIHlupPmiJDlip8+JyArIHNyY0hvbWUpO1xcbiAgICAgICAgfVxcbiAgICB9IGNhdGNoIChlKSB7XFxuICAgICAgICBsb2coJ+iOt+WPluS7o+eggeW6k+W8guW4uD4nICsgZS5tZXNzYWdlKTtcXG4gICAgfVxcbiAgICByZXR1cm4gc3JjSG9tZTtcXG59XFxuXFxuZnVuY3Rpb24gc2V0cHJveHkoaW5wdXQsIHp0KSB7XFxuICAgIGxldCBsaXN0ID0gW107XFxuICAgIGlmICgkLnR5cGUoaW5wdXQpID09IFxcXCJzdHJpbmdcXFwiICYmIGlucHV0LnRyaW0oKSkge1xcbiAgICAgICAgbGlzdC5wdXNoKGlucHV0LnRyaW0oKSk7XFxuICAgIH0gZWxzZSBpZiAoJC50eXBlKGlucHV0KSA9PSBcXFwiYXJyYXlcXFwiKSB7XFxuICAgICAgICBsaXN0ID0gaW5wdXQ7XFxuICAgIH1cXG5cXG4gICAgaWYgKGxpc3QubGVuZ3RoID4gMCkge1xcbiAgICAgICAgbGlzdC5mb3JFYWNoKHVybCA9PiB7XFxuICAgICAgICAgICAgbGV0IGluZGV4ID0gcHJveHlsaXN0LmZpbmRJbmRleChpdCA9PiBpdC51cmwgPT0gdXJsKTtcXG4gICAgICAgICAgICBpZiAoaW5kZXggPT0gLTEpIHtcXG4gICAgICAgICAgICAgICAgcHJveHlsaXN0LnB1c2goe1xcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmxcXG4gICAgICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgfSBlbHNlIGlmICh6dCA9PSAxKSB7XFxuICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm94eWxpc3RbaW5kZXhdLnN0b3A7XFxuICAgICAgICAgICAgfSBlbHNlIGlmICh6dCA9PSAwKSB7XFxuICAgICAgICAgICAgICAgIHByb3h5bGlzdFtpbmRleF0uc3RvcCA9IDE7XFxuICAgICAgICAgICAgfSBlbHNlIGlmICh6dCA9PSAyKSB7XFxuICAgICAgICAgICAgICAgIHByb3h5bGlzdCA9IHByb3h5bGlzdC5maWx0ZXIodiA9PiB2LnVybCAhPSB1cmwpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pXFxuICAgICAgICBKdWNvbmZpZ1snZ2hwcm94eSddID0gcHJveHlsaXN0O1xcbiAgICAgICAgd3JpdGVGaWxlKGNmZ2ZpbGUsIEpTT04uc3RyaW5naWZ5KEp1Y29uZmlnKSk7XFxuICAgIH1cXG59XFxuXFxuZnVuY3Rpb24gcHJveHlQYWdlKCkge1xcbiAgICBzZXRQYWdlVGl0bGUoJ+WQr+WKqOS7o+eQhueuoeeQhicpO1xcbiAgICBsZXQgZCA9IFtdO1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6ICfpgInmi6nku6PnoIHlupPojrflj5bmlrnlvI8nLFxcbiAgICAgICAgZGVzYzogJ+acieS7o+eQhu+8micgKyBwcm94eWxpc3QubGVuZ3RoICsgJ++8jOacieaViOeahO+8micgKyBnZXRwcm94eSgpLmxlbmd0aCxcXG4gICAgICAgIHVybDogJChbJ+aWueW8j+S4gO+8muiHquWKqOiOt+WPluS7o+eggeW6kycsICfmlrnlvI/kuozvvJrmiYvlt6XmjIflrprku6PnoIHlupMnXSwgMSwgJ+aMh+WumuiBmumYheS7o+eggeiOt+WPluaWueW8jycpLnNlbGVjdCgoKSA9PiB7XFxuICAgICAgICAgICAgaWYgKE1ZX0lOREVYID09IDApIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+a3u+WKoOWujOacieaViOeahGdpdGh1YuWKoOmAn+S7o+eQhuWQjui/lOWbnuWIt+aWsFxcXCI7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChNWV9JTkRFWCA9PSAxKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiAkKGdldEl0ZW0oJ+S+nei1licsICcnKSwgXFxcIuaMh+WumuiBmumYheS7o+eggeS7k+WcsOWdgFxcXCIpLmlucHV0KCgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvXFxcXHMrL2csICcnKTtcXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5wdXQuc3RhcnRzV2l0aCgnaHR0cCcpIHx8ICFpbnB1dC5lbmRzV2l0aCgnU3JjSnUuanMnKSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/ovpPlhaXmnInor69cXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgc2V0SXRlbSgn5L6d6LWWJywgaW5wdXQpO1xcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/lt7Lorr7nva5cXFwiO1xcbiAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzFcXFwiXFxuICAgIH0pO1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6ICfmt7vliqAnLFxcbiAgICAgICAgY29sX3R5cGU6ICdpbnB1dCcsXFxuICAgICAgICBkZXNjOiAn6L6T5YWlZ2l0aHVi5Yqg6YCf5Luj55CG5Zyw5Z2AJyxcXG4gICAgICAgIHVybDogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgY2xlYXJNeVZhcignZ2V0X2docHJveHknKTtcXG4gICAgICAgICAgICBpbnB1dCA9IGlucHV0LnRyaW0oKTtcXG4gICAgICAgICAgICBpZiAoaW5wdXQgJiYgaW5wdXQuaW5jbHVkZXMoXFxcIi9odHRwc1xcXCIpKSB7XFxuICAgICAgICAgICAgICAgIGlucHV0ID0gaW5wdXQuc3BsaXQoXFxcIi9odHRwXFxcIilbMF0gKyBcXFwiL1xcXCI7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIGlmICghaW5wdXQuc3RhcnRzV2l0aCgnaHR0cCcpIHx8IGlucHV0LmluY2x1ZGVzKFxcXCJnaXRodWJ1c2VyY29udGVudC5jb21cXFwiKSB8fCAhaW5wdXQuZW5kc1dpdGgoXFxcIi9cXFwiKSkge1xcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v6L6T5YWl6ZSZ6K+v77yM6K+36L6T5YWl5q2j56Gu55qEZ2l0aHVi5Yqg6YCf5Luj55CGXFxcIjtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgJC5yZXF1aXJlKCdnaHByb3h5Jykuc2V0cHJveHkoaW5wdXQpO1xcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgIH0pLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGdldE15VmFyKCdnZXRfZ2hwcm94eScsICcnKSxcXG4gICAgICAgICAgICB0aXRsZVZpc2libGU6IHRydWVcXG4gICAgICAgIH1cXG4gICAgfSk7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImxpbmVcXFwiXFxuICAgIH0pO1xcbiAgICBwcm94eWxpc3QucmV2ZXJzZSgpO1xcbiAgICBsZXQgd2l0aG91dFN0b3AgPSBwcm94eWxpc3QuZmlsdGVyKGl0ZW09PiFpdGVtLnN0b3ApO1xcbiAgICBsZXQgd2l0aFN0b3AgPSBwcm94eWxpc3QuZmlsdGVyKGl0ZW09Pml0ZW0uc3RvcCk7XFxuICAgIHdpdGhvdXRTdG9wLmNvbmNhdCh3aXRoU3RvcCkuZm9yRWFjaChpdCA9PiB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBpdC5zdG9wID8gJ+KAmOKAmOKAmeKAmTxmb250IGNvbG9yPVxcXCIjZjIwYzAwXFxcIj4nICsgaXQudXJsICsgJzwvZm9udD4nIDogaXQudXJsLFxcbiAgICAgICAgICAgIHVybDogJChbaXQuc3RvcCA/IFxcXCLlkK/nlKhcXFwiIDogXFxcIuWBnOeUqFxcXCIsIFxcXCLliKDpmaRcXFwiLCBcXFwi5aSN5Yi2XFxcIiwgXFxcIuajgOa1i1xcXCJdLCAxLCBcXFwiXFxcIikuc2VsZWN0KCh1cmwpID0+IHtcXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0ID09IFxcXCLlkK/nlKhcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICAkLnJlcXVpcmUoJ2docHJveHknKS5zZXRwcm94eSh1cmwsIDEpO1xcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID09IFxcXCLlgZznlKhcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICAkLnJlcXVpcmUoJ2docHJveHknKS5zZXRwcm94eSh1cmwsIDApO1xcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID09IFxcXCLliKDpmaRcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICAkLnJlcXVpcmUoJ2docHJveHknKS5zZXRwcm94eSh1cmwsIDIpO1xcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID09IFxcXCLlpI3liLZcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICBjb3B5KHVybCk7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID09IFxcXCLmo4DmtYtcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRwcm94eShwcm94eSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1cmwgPSAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NyYzQ4NTk3OTYyL2hrL21hc3Rlci92ZXJpZnknO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gZmV0Y2gocHJveHkrdXJsLCB7dGltZW91dDo1MDAwfSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC50cmltKCkgPT0gJ29rJykge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJveHk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIHNob3dMb2FkaW5nKCfmo4DmtYvkuK0nKTtcXG4gICAgICAgICAgICAgICAgICAgIGxldCBnaHByb3h5ID0gZ2V0cHJveHkodXJsKTtcXG4gICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XFxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2hwcm94eSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndG9hc3Q6Ly/miJDlip8nO1xcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAkLnJlcXVpcmUoJ2docHJveHknKS5zZXRwcm94eSh1cmwsIDApO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RvYXN0Oi8v5aSx6LSl77yM5bey5YGc55SoJztcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgfSwgaXQudXJsKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInRleHRfMVxcXCIsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgaWQ6IGl0LnVybFxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICB9KVxcbiAgICBzZXRSZXN1bHQoZCk7XFxufVxcbiQuZXhwb3J0cyA9IHtcXG4gICAgZ2V0cHJveHk6IGdldHByb3h5LFxcbiAgICBzZXRwcm94eTogc2V0cHJveHksXFxuICAgIHByb3h5UGFnZTogcHJveHlQYWdlLFxcbiAgICBnZXRQcm94eVVybDogZ2V0UHJveHlVcmwsXFxuICAgIGdldFNyY0hvbWU6IGdldFNyY0hvbWVcXG59O1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5a+85YWl56Gu6K6k6aG1XCIsXCJwYXRoXCI6XCJpbXBvcnRDb25maXJtXCIsXCJydWxlXCI6XCJqczpcXHJcXG5sZXQgc3JjSG9tZSA9IGdldFB1YmxpY0l0ZW0oJ+iBmumYhScsJycpO1xcclxcbmlmKCFzcmNIb21lKXtcXHJcXG4gICAgZXZhbChNWV9SVUxFLnByZVJ1bGUpO1xcclxcbiAgICBzcmNIb21lID0gY29uZmlnLuiBmumYhTtcXHJcXG59XFxyXFxuaWYgKCFjb25maWcu6IGa6ZiFKSB7XFxyXFxuICAgIGluaXRDb25maWcoe1xcclxcbiAgICAgICAg6IGa6ZiFOiBzcmNIb21lXFxyXFxuICAgIH0pO1xcclxcbn1cXHJcXG5pZihmaWxlRXhpc3QoXFxcImhpa2VyOi8vZmlsZXMvX2NhY2hlL0p1amlleGkvY2xvdWRpbXBvcnQudHh0XFxcIikpe1xcclxcbiAgICBpbml0Q29uZmlnKHtcXHJcXG4gICAgICAgIGp4Q29kZVBhdGg6IHNyY0hvbWUucmVwbGFjZSgvW14vXSokLywnJykgKyAnamlleGkvJ1xcclxcbiAgICB9KVxcclxcbiAgICByZXF1aXJlKGNvbmZpZy5qeENvZGVQYXRoICsgJ1NyY1B1YmxpYy5qcycpO1xcclxcbiAgICBpbXBvcnRDb25maXJtKCk7XFxyXFxufWVsc2V7XFxyXFxuICAgIHJlcXVpcmUoc3JjSG9tZS5yZXBsYWNlKC9bXi9dKiQvLCcnKSArICdTcmNKdVNldC5qcycpO1xcclxcbiAgICBpbXBvcnRDb25maXJtKCk7XFxyXFxufVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiaW1wb3J0R01cIixcInBhdGhcIjpcImltcG9ydEdNXCIsXCJydWxlXCI6XCJqczpcXG5sZXQgaG9tZSA9ICQucmVxdWlyZSgnZ2hwcm94eScpLmdldFNyY0hvbWUoKTtcXG5pZiAoaG9tZSkge1xcbiAgICBsZXQgcCA9IGhvbWUucmVwbGFjZSgvW14vXSokLywgJycpICsgXFxcInBsdWdpbnMvZ2xvYmFsbWFwLmpzXFxcIjtcXG4gICAgJC5pbXBvcnRSZXF1aXJlKHApO1xcbn1cIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuaOpeWPo+S7o+eggVwiLFwicGF0aFwiOlwiamlla291XCIsXCJydWxlXCI6XCJqczpcXG5sZXQgbWV0aG9kID0gZ2V0UHVibGljSXRlbSgn6IGa6ZiFJywgJycpLnJlcGxhY2UoL1teL10qJC8sJycpICsgJ1NyY0p1TWV0aG9kMi5qcyc7XFxucmVxdWlyZShtZXRob2QpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5pCc57Si6aG1XCIsXCJwYXRoXCI6XCJzb3VzdW9wYWdlXCIsXCJydWxlXCI6XCJqczpcXG5sZXQgcmVseWZpbGUgPSBnZXRQdWJsaWNJdGVtKCfogZrpmIUnLCAnJyk7XFxucmVxdWlyZShyZWx5ZmlsZSk7XFxubGV0IG5hbWUgPSBnZXRQYXJhbShcXFwia2V5d29yZFxcXCIpO1xcbmxldCB0eXBlID0gZ2V0UGFyYW0oXFxcInR5cGVcXFwiKTtcXG5uZXdTZWFyY2hQYWdlKG5hbWUsIHR5cGUpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi6aKR6YGT6aG16Z2iXCIsXCJwYXRoXCI6XCJydWxlUGFnZVwiLFwicnVsZVwiOlwianM6XFxubGV0IHR5cGUgPSBnZXRQYXJhbShcXFwidHlwZVxcXCIpO1xcbmdldFlpRGF0YSh0eXBlKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuS4iemSiOenkeWFtFwiLFwicGF0aFwiOlwiZHVhbmp1XCIsXCJydWxlXCI6XCJqczpcXG5sZXQgZCA9IFtdO1xcbnJlcXVpcmUoJ2h0dHA6Ly8xMjMuNTYuMTA1LjE0NS93ZWlzeXIvSDXop4bpopHmkq3mlL7lmaguanMnKTtcXG5INeinhumikeaSreaUvuWZqChkKTtcXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLop6PmnpBcIixcInBhdGhcIjpcInBhcnNlVXJsXCIsXCJydWxlXCI6XCJqczpcXHJcXG5mdW5jdGlvbiBheXRtUGFyc2UoaW5wdXQsIGRhdGFPYmopIHtcXHJcXG4gICAgbGV0IHNyY0hvbWUgPSBnZXRQdWJsaWNJdGVtKCfogZrpmIUnLCAnJyk7XFxyXFxuICAgIGlmICghc3JjSG9tZSkge1xcclxcbiAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+mcgOimgeWFiOaJk+W8gOS4gOasoeiBmumYhVxcXCI7XFxyXFxuICAgIH1cXHJcXG4gICAgXFxyXFxuICAgIGxldCB7bGF6eX0gPSAkLnJlcXVpcmUoc3JjSG9tZS5yZXBsYWNlKC9bXi9dKiQvLCAnJykgKyAnamlleGkvU3JjSW52b2tlLmpzJyk7XFxyXFxuICAgIHJldHVybiBsYXp5KGlucHV0LCBkYXRhT2JqKTtcXHJcXG59XFxuXFxyXFxuZnVuY3Rpb24gY2FsbFBhcnNlKGlucHV0KSB7XFxyXFxuICAgIGxldCBzcmNIb21lID0gZ2V0UHVibGljSXRlbSgn6IGa6ZiFJywgJycpO1xcclxcbiAgICBpZiAoIXNyY0hvbWUpIHtcXHJcXG4gICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/pnIDopoHlhYjmiZPlvIDkuIDmrKHogZrpmIVcXFwiO1xcclxcbiAgICB9XFxyXFxuICAgIFxcclxcbiAgICBsZXQge2NhbGx9ID0gJC5yZXF1aXJlKHNyY0hvbWUucmVwbGFjZSgvW14vXSokLywgJycpICsgJ2ppZXhpL1NyY0ludm9rZS5qcycpO1xcclxcbiAgICByZXR1cm4gY2FsbChpbnB1dCk7XFxyXFxufVxcclxcblxcclxcbmxldCBwYXJzZVNldCA9ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKCkgPT4ge1xcclxcbiAgICBsZXQgc3JjSG9tZSA9IGdldFB1YmxpY0l0ZW0oJ+iBmumYhScsICcnKTtcXHJcXG4gICAgaWYgKCFzcmNIb21lKSB7XFxyXFxuICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v6ZyA6KaB5YWI5omT5byA5LiA5qyh6IGa6ZiFXFxcIjtcXHJcXG4gICAgfVxcclxcbiAgICBcXHJcXG4gICAgcmV0dXJuICQoJ2hpa2VyOi8vZW1wdHkjbm9SZWNvcmRIaXN0b3J5IyNub0hpc3RvcnkjJykucnVsZSgoc3JjSG9tZSkgPT4ge1xcclxcbiAgICAgICAgbGV0IHtqeFNldH0gPSAkLnJlcXVpcmUoc3JjSG9tZS5yZXBsYWNlKC9bXi9dKiQvLCAnJykgKyAnamlleGkvU3JjSW52b2tlLmpzJyk7XFxyXFxuICAgICAgICBqeFNldCgpO1xcclxcbiAgICB9LHNyY0hvbWUpXFxyXFxufSlcXHJcXG5cXHJcXG4kLmV4cG9ydHMu6Kej5p6QID0gYXl0bVBhcnNlO1xcbiQuZXhwb3J0cy7osIPnlKggPSBjYWxsUGFyc2U7XFxyXFxuJC5leHBvcnRzLuiuvue9riA9IHBhcnNlU2V0O1xcclxcblwifV0iLCJpY29uIjoiaHR0cHM6Ly9zMS5heDF4LmNvbS8yMDIzLzA0LzE2L3A5OXFiUjAucG5nIiwicHJveHkiOiIifQ==